<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='js/mapbox-gl-dev.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.2.2/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
        button {
          display: block;
          position: absolute;
          top:20px;
          left:10px;
          width: 200px;
          height: 40px;
          padding: 10px;
          border: none;
          border-radius: 3px;
          font-size: 12px;
          text-align: center;
          color: #fff;
          background: #16a085;
        }

        #step1 {
          top:20px;
          left:10px;
        }
        #step2 {
          top:70px;
          left:10px;
          background: #2980b9;
        }
        #step3 {
          top:120px;
          left:10px;
          background: #2c3e50;
        }
        #step4 {
          top:170px;
          left:10px;
          background: #9b59b6;
        }
        #step5 {
          top:220px;
          left:10px;
          background: #bdc3c7;
        }

        
        
        
    </style>
</head>
<body>

<div id='map'></div>
<button onclick='step1();' id='step1'>Step 1</button>
<button onclick='step2();' id='step2'>Step 2</button>
<button onclick='step3();' id='step3'>Step 3</button>
<button onclick='step4();' id='step4'>Step 4</button>
<button onclick='step5();' id='step5'>Step 5</button>
<script>
var map = new mapboxgl.Map({
  container: 'map', // container id
  style: 'esri-styles.json', //stylesheet location
  center: [37.7833, -122.4167], // starting position
  zoom: 8 // starting zoom
});


function clear(){
  map.style.removeClass('step1');
  map.style.removeClass('step2');
  map.style.removeClass('step3');
  map.style.removeClass('parkflash2');
  if (timer) clearInterval(timer);
}

var zoomed = false, timer;
function step1() { 
  clear();
  map.flyTo([37.7833, -122.4167], 15, 0, function(){
    map.style.removeClass('dark');

  });
}
function step2() { 
  clear();
  map.flyTo([37.7833, -122.4167], 14, 10);
  map.style.removeClass('dark');
}
function step3() { 
  clear();
  map.flyTo([37.7833, -122.4167], 16, -20);
  map.style.removeClass('dark');
}
function step4() { 
  clear();
  map.flyTo([37.7833, -122.4167], 15, 30);
  //map.style.addClass('dark');
  timer = setInterval(function(){
    console.log('go');
    map.style.addClass('parkflash2');
    setTimeout(function(){
      map.style.removeClass('parkflash2');  
    },700);
  },1500);
}
function step5() { 
  clear();
  map.flyTo([37.7833, -122.4167], 14, -70);
  map.style.removeClass('dark');
}
</script>
</script>

</body>
</html>
